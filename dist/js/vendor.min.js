var Lynx=function(){var a={},b=0,c=0,d=function(){},e=null;a.Debug=!1,a.DisableCache=!1,a.Filepath="src/",a.LogTarget="",a.Main={},a.Paused=!1,a.DefaultContext="2d",a.DisableWebGL=!1,Object.defineProperty(a,"scene",{get:function(){return e},set:function(a){e.Unload(),Lynx.Emit("Scene.Change"),a.Load(function(){e=a})}}),a.Load=function(a){this.Filepath="src/",d=a,f()}.bind(a),a.Start=function(){this.Main.Start(),this.Animator.Start(),Lynx.Emit("Core.Ready")}.bind(a);var f=function(){k("core/EventEmitter.js"),k("core/EventListener.js"),k("core/Object.js"),k("core/Logger.js"),k("core/Component.js"),k("core/ComponentManager.js"),k("core/AssetManager.js"),k("core/Thread.js"),k("core/Quadtree.js"),k("core/Entity.js"),k("core/Layer.js"),k("core/SceneBuilder.js"),k("geometry/Point.js"),k("geometry/Line.js"),k("geometry/Rectangle.js"),k("geometry/Circle.js"),k("gfx/Animator.js"),k("gfx/Shaders.js"),k("gfx/ShaderComponent.js"),k("gfx/Renderer.js"),k("gfx/Canvas.js"),k("gfx/CanvasElement.js"),k("gfx/Viewport.js")}.bind(a),g=function(){b++,h()}.bind(a),h=function(){b>=c&&(i(),d())}.bind(a),i=function(){console.log=function(a){Lynx.Log(a)},console.error=console.debug=console.info=console.log,window.onerror=function(a,b,c,d,e){Lynx.Log("An error was encountered in "+b+" at line "+c+":"+d+'. "'+e+'"',"Error"),Lynx.Emit("Core.Error",this)},j(),this.Main=new Lynx.Thread("Main"),this.Main.On("_threadUpdateMain",function(a){Lynx.DocumentHidden?(Lynx.Emit("Paused",a),Lynx.Paused=!0):(Lynx.Emit("beforeUpdate",a),Lynx.Emit("Update",a),Lynx.Emit("afterUpdate",a),Lynx.Paused=!1)}),this.Scene=new Lynx.SceneBuilder("lynx-default")}.bind(a),j=function(){if(!window.WebGLRenderingContext||Lynx.DisableWebGL)return Lynx.Debug&&Lynx.Log("Info","WebGL Rendering is either unsupported or disabled."),void 0;for(var a=["webgl","experimental-webgl"],b=null,c=0;c<a.length;c++){try{var d=document.createElement("canvas");b=d.getContext(a[c])}catch(e){}if(b){this.DefaultContext=a[c];break}}}.bind(a),k=function(a,b){b=b||!0;var d=document.createElement("script");d.type="text/javascript",d.async=!1,d.addEventListener("load",g.bind(this),!1),Lynx.DisableCache&&(a=a+"?a="+Date.now()),d.src=this.Filepath+a,document.body.appendChild(d),c++}.bind(a);return Object.defineProperty(a,"DocumentHidden",{get:function(){return document.hidden||document.msHidden||document.webkitHidden||document.mozHidden}}),a}();